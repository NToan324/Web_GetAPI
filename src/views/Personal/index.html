<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css    " />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link rel="stylesheet" href="/Web_RestAPI/src/views/Home/style.css" />
    <link rel="stylesheet" href="/Web_RestAPI/src/views/Personal/style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <title>Personal</title>

    <style>
        .edit-form {
            display: flex;
            align-items: flex-start;
            margin-top: 10px;
        }

        .edit-form {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-top: -5px;
        }

        .edit-form input {
            padding: 0 5px;
            margin-top: -3px;
            border-radius: 4px;
        }

        .save-button {
            padding: 5px 10px;
            background-color: #0006b6;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .save-button:hover {
            background-color: #010383;
        }
    </style>

<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="profile">
            <div class="profile-img">
                <a href="/Web_RestAPI/profile">
                    <img src="/Web_RestAPI/storage/users/default_avatar.jpg" alt="avatar" />
                </a>
            </div>
            <div class="name">
                <h3></h3>
            </div>
        </div>

        <div class="menu">
            <a href="/Web_RestAPI">
                <span class="icon">
                    <i class="fas fa-home"></i>
                    <span class="tooltip">Home</span>
                </span>
                <span class="hide">Feed</span>
            </a>
            <a href="#" id="a-search">
                <span class="icon">
                    <i class="fas fa-search"></i>
                    <span class="tooltip">Search</span>
                </span>
                <span class="hide">Search</span>
            </a>
            <a href="#" id="a-notification">
                <span class="icon">
                    <i class="fas fa-bell"></i>
                    <span class="tooltip">Notification</span>
                </span>
                <span class="hide">Notification</span>
            </a>
            <a href="#">
                <span class="icon">
                    <i class="fas fa-comments"></i>
                    <span class="tooltip">Message</span>
                </span>
                <span class="hide">Message</span>
            </a>
            <a href="/Web_RestAPI/post">
                <span class="icon">
                    <i class="fas fa-plus-circle"></i>
                    <span class="tooltip">Post</span>
                </span>
                <span class="hide">Post</span>
            </a>
            <a href="/Web_RestAPI/setting" id="a-setting">
                <span class="icon">
                    <i class="fas fa-cog"></i>
                    <span class="tooltip">Settings</span>
                </span>
                <span class="hide">Settings</span>
            </a>
            <a id="logout-btn" class="logout">
                <span class="icon">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="tooltip">Logout</span>
                </span>
                <span class="hide">Logout</span>
            </a>
        </div>
    </div>
    <!-- Confirm logout -->
    <div id="confirmBox" class="hidden">
        <div class="confirm-content">
            <p>Are you sure want to logout?</p>
            <button id="logoutBtn">Logout</button>
            <button id="cancelBtn">Cancel</button>
        </div>
    </div>
    <!-- Notification show page -->
    <div class="container-function container-notification" id="container-notification">
        <div class="form-container-notification">
            <form action="" class="action-notification">
                <div class="header-notification">
                    <h1>Notifications</h1>
                </div>
                <div class="body-search-notification">
                    <p class="day-notification">Today</p>
                    <table>
                        <div class="profile-notification">
                            <tr class="hover-notification">
                                <td width="10%">
                                    <div class="profile-img-notification">
                                        <img src="/Web_RestAPI/storage/posts/image2.jpg" alt="avatar" />
                                    </div>
                                </td>
                                <td>
                                    <p class="name-notification">
                                        katiee.04
                                        <span id="news-notification">liked your news.</span>
                                    </p>
                                </td>
                                <td width="20%" class="hour-notification">
                                    3 mins
                                </td>
                            </tr>
                            <tr class="hover-notification">
                                <td width="10%">
                                    <div class="profile-img-notification">
                                        <img src="/Web_RestAPI/storage/posts/image1.jpg" alt="avatar" />
                                    </div>
                                </td>
                                <td>
                                    <p class="name-notification">
                                        typical__
                                        <span id="news-notification">mentioned you in the commnet: I
                                            love you so much. üíù</span>
                                    </p>
                                </td>
                                <td width="20%" class="hour-notification">
                                    2 hours
                                </td>
                            </tr>
                        </div>
                    </table>

                    <p class="day-notification">Yesterday</p>

                    <table>
                        <div class="profile-notification">
                            <tr class="hover-notification">
                                <td width="10%">
                                    <div class="profile-img-notification">
                                        <img src="/Web_RestAPI/storage/posts/image1.jpg" alt="avatar" />
                                    </div>
                                </td>
                                <td>
                                    <p class="name-notification">
                                        jessica
                                        <span id="news-notification">liked your comment:
                                            Congratulation üòö</span>
                                    </p>
                                </td>
                                <td width="20%" class="hour-notification">
                                    23 hours
                                </td>
                            </tr>
                            <tr class="hover-notification">
                                <td width="10%">
                                    <div class="profile-img-notification">
                                        <img src="/Web_RestAPI/storage/posts/image4.jpg" alt="avatar" />
                                    </div>
                                </td>
                                <td>
                                    <p class="name-notification">
                                        greeeny and 90 other people
                                        <span id="news-notification">liked your post.</span>
                                    </p>
                                </td>
                                <td width="10%" class="hour-notification">
                                    1 day
                                </td>
                            </tr>
                        </div>
                    </table>

                    <p class="day-notification">This week</p>

                    <table>
                        <div class="profile-notification">
                            <tr class="hover-notification">
                                <td width="10%">
                                    <div class="profile-img-notification">
                                        <img src="/Web_RestAPI/storage/posts/image1.jpg" alt="avatar" />
                                    </div>
                                </td>
                                <td>
                                    <p class="name-notification">
                                        jessica
                                        <span id="news-notification">liked your comment:
                                            Congratulation üòö</span>
                                    </p>
                                </td>
                                <td width="20%" class="hour-notification">
                                    1 day
                                </td>
                            </tr>
                            <tr class="hover-notification">
                                <td width="10%">
                                    <div class="profile-img-notification">
                                        <img src="/Web_RestAPI/storage/posts/image4.jpg" alt="avatar" />
                                    </div>
                                </td>
                                <td>
                                    <p class="name-notification">
                                        greeeny and 90 other people
                                        <span id="news-notification">liked your post.</span>
                                    </p>
                                </td>
                                <td width="20%" class="hour-notification">
                                    2 days
                                </td>
                            </tr>
                            <tr class="hover-notification">
                                <td width="10%">
                                    <div class="profile-img-notification">
                                        <img src="/Web_RestAPI/storage/posts/image2.jpg" alt="avatar" />
                                    </div>
                                </td>
                                <td>
                                    <p class="name-notification">
                                        katiee.04
                                        <span id="news-notification">liked your news.</span>
                                    </p>
                                </td>
                                <td width="20%" class="hour-notification">
                                    2 days
                                </td>
                            </tr>
                            <tr class="hover-notification">
                                <td width="10%">
                                    <div class="profile-img-notification">
                                        <img src="/Web_RestAPI/storage/posts/image3.jpg" alt="avatar" />
                                    </div>
                                </td>
                                <td>
                                    <p class="name-notification">
                                        typical__
                                        <span id="news-notification">mentioned you in the commnet: I
                                            love you so much. üíù</span>
                                    </p>
                                </td>
                                <td width="20%" class="hour-notification">
                                    4 days
                                </td>
                            </tr>
                        </div>
                    </table>
                </div>
            </form>
        </div>
    </div>
    <!-- Search show page -->
    <div class="container-function container-search" id="container-search">
        <div class="form-container-search">
            <div class="form-container">
                <form id="search-container" class="action">
                    <div class="header">
                        <h2>Search</h2>
                        <div class="search">
                            <i class="fas fa-search"></i>
                            <input type="text" id="search-input" placeholder="Search" />
                        </div>
                    </div>
                    <div class="body-search">
                        <div class="profile">
                            <div id="search-results">
                                <!-- K·∫øt qu·∫£ t√¨m ki·∫øm s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y -->
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Post show page -->
    <div class="container-function container-post" id="container-post">
        <div class="form-container-post">
            <form action="" class="action">
                <div class="header-post">
                    <h2>Create Post</h2>
                </div>

                <div class="body-post">
                    <div class="profile-post">
                        <table>
                            <tr>
                                <td width="10%">
                                    <img class="profile-img-post" src="/Web_RestAPI/storage/posts/image2.jpg"
                                        alt="avatar" />
                                </td>
                                <td>
                                    <p class="name-post">Yen Ngoc</p>
                                    <select name="select-object">
                                        <option>Public</option>
                                        <option>Private</option>
                                        <option>Friends</option>
                                    </select>
                                </td>
                            </tr>
                        </table>
                        <textarea rows="5" cols="50" placeholder="What are you thinking?"></textarea>
                    </div>

                    <div class="add-post">
                        <table>
                            <tr>
                                <td>Add to your post</td>
                                <td width="20%">
                                    <img class="img-add-post" src="/Web_RestAPI/storage/posts/post1.jpg" />
                                    <img class="img-add-post" src="/Web_RestAPI/storage/posts/post2.jpg" />
                                </td>
                            </tr>
                        </table>
                    </div>
                    <button class="btn-post">Post</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Setting show page -->
    <div class="container-function container-setting" id="container-setting">
        <div class="form-container-setting">
            <form action="" class="action">
                <div class="header-setting">
                    <h2>Settings</h2>
                </div>
                <div class="body-setting">
                    <p id="header-table">Update Profile</p>
                    <table>
                        <tr>
                            <div class="input-change-avt">
                                <div class="change-avt">Avatar</div>
                                <img src="#" alt="Avatar" id="showImage" style="display: block" />
                                <input type="file" name="avatar" id="change-avt" />
                                <label for="change-avt">
                                    <i class="fa-solid fa-image"></i>
                                </label>
                            </div>
                        </tr>
                        <tr>
                            <td width="45%">Name</td>
                            <td class="name-profile">Nhat Toan</td>
                        </tr>
                        <tr>
                            <td>Contact</td>
                            <td class="name-profile">nhattoan@gmail.com</td>
                        </tr>
                        <tr>
                            <td>Bio</td>
                            <td class="name-profile"></td>
                        </tr>
                    </table>
                </div>
                <button class="btn-setting">Update</button>

                <div class="body-setting">
                    <p id="header-table">Change Password</p>
                    <table>
                        <tr>
                            <td>Current Password</td>
                            <td>
                                <input type="password" placeholder="Enter Current Password" />
                            </td>
                        </tr>
                        <tr>
                            <td>New Password</td>
                            <td>
                                <input type="password" placeholder="Enter New Password" />
                            </td>
                        </tr>
                        <tr>
                            <td>Confirm Password</td>
                            <td>
                                <input type="password" placeholder="Enter Confirm Password" />
                            </td>
                        </tr>
                    </table>

                    <p><a href="">Forgot Password?</a></p>
                    <button class="btn-setting">Confirm</button>
                </div>

            </form>
        </div>
    </div>
    <!-- Main Home -->
    <div class="main-home">
        <div class="personal-page">
            <div class="personal-page-intro">
                <div class="personal-page-img">
                    <img src="/Web_RestAPI/storage/posts/image2.jpg" alt="avatar" />
                </div>
                <div class="personal-page-info">
                    <img src="/Web_RestAPI/storage/users/default_avatar.jpg" alt="avatar" id="personal-page-avt">
                    <div class="personal-page-name">
                        <h1>Loading...</h1>
                        <p></p>
                    </div>
                    <a href="/Web_RestAPI/post">
                        <i class="fas fa-plus"></i>
                        <span>Post</span>
                    </a>
                </div>
            </div>

            <div class="personal-page-post">

            </div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Fetch user information
            fetch('/Web_RestAPI/getUser')
                .then(response => response.json())
                .then(data => {
                    // Update profile fields with user data
                    document.getElementById('personal-page-avt').src = `/Web_RestAPI/storage/users/${data.user.avatar}`;
                    document.querySelector('.personal-page-name h1').textContent = data.user.name;
                    document.querySelector('.personal-page-name p').textContent = data.user.bio;
                })
                .catch(error => {
                    console.error('Error fetching user data:', error);
                });
        });


    </script>
    <script src="/Web_RestAPI/src/views/Personal/load-post-profile.js"></script>
    <script src="/Web_RestAPI/src/views/Personal/delete-post.js"></script>
    <script src="/Web_RestAPI/src/views/Home/search.js"></script>

    <script src="/Web_RestAPI/src/views/Home/script.js"></script>
    <script src="/Web_RestAPI/src/views/Home/logout.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Fetch user information
            fetch('/Web_RestAPI/getUser')
                .then((response) => response.json())
                .then((data) => {
                    // Update profile fields with user data
                    document.querySelector(
                        '.profile-img img'
                    ).src = `/Web_RestAPI/storage/users/${data.user.avatar}` // Assuming data.user.avatar contains the URL of the avatar image
                    document.querySelector('.name h3').textContent =
                        data.user.name
                })
                .catch((error) => {
                    console.error('Error fetching user data:', error)
                })
        })
    </script>
</body>

</html>